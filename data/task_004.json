{
  "task": "Создай функцию УдалитьПоследнююЗапись(Валюта) которая удалять последнюю по времени запись регистра сведений КурсыВалют с измерением Валюта = Валюта",
  "context": "",
  "validation": "Функция ЗадачаРешена(Валюта)      \n\t\n\tЗапрос = Новый Запрос;   \n\tЗапрос.УстановитьПараметр(\"Валюта\", Валюта);\n\tЗапрос.Текст =\n\t\"ВЫБРАТЬ\n\t|\tКурсыВалют.Период КАК Период\n\t|ИЗ\n\t|\tРегистрСведений.КурсыВалют КАК КурсыВалют\n\t|ГДЕ\n\t|\tКурсыВалют.Валюта = &Валюта\n\t|\n\t|УПОРЯДОЧИТЬ ПО\n\t|\tПериод УБЫВ\";  \n\t\n\tВыборка = Запрос.Выполнить().Выбрать();\n\tЕсли НЕ Выборка.Следующий() Тогда\n\t\n\t\tВозврат Ложь;\n\t\n\tКонецЕсли;     \n\t\n\tВозврат Выборка.Период = Дата('20221225');\n\nКонецФункции\n\n\n\n",
  "gt_solution": "Функция УдалитьПоследнююЗапись(Валюта) Экспорт\n    \n    // 1) Находим самый поздний Период для заданной валюты\n    Запрос = Новый Запрос(\n    \"ВЫБРАТЬ ПЕРВЫЕ 1\n     |    Курсы.Период КАК Период\n     |ИЗ\n     |    РегистрСведений.КурсыВалют КАК Курсы\n     |ГДЕ\n     |    Курсы.Валюта = &Валюта\n     |УПОРЯДОЧИТЬ ПО\n     |    Курсы.Период УБЫВ\");\n    Запрос.УстановитьПараметр(\"Валюта\", Валюта);\n\n    Рез = Запрос.Выполнить();\n    Выборка = Рез.Выбрать();\n\n    Если Не Выборка.Следующий() Тогда\n        Возврат Ложь; // записей по валюте нет\n    КонецЕсли;\n\n    // 2) Удаляем именно эту запись по ключам (Валюта + Период)\n    Менеджер = РегистрыСведений.КурсыВалют.СоздатьМенеджерЗаписи();\n    Менеджер.Валюта = Валюта;\n    Менеджер.Период = Выборка.Период;\n    Менеджер.Прочитать();\n\n    Если Менеджер.Выбран() Тогда\n        Менеджер.Удалить();\n    КонецЕсли;\n\nКонецФункции\n\n",
  "run_context": "Функция ЗапуститьРешение() Экспорт\n\t\n\t// Снимок всех записей регистра -> ТаблицаЗначений\n\tНаборВсе = РегистрыСведений.КурсыВалют.СоздатьНаборЗаписей();\n\tНаборВсе.Прочитать();\n\tСнимок = НаборВсе.Выгрузить(); // ТаблицаЗначений «как есть»\n\tВалютаЮСД = Справочники.Валюты.НайтиПоНаименованию(\"USD\");\n\tУдалитьПоследнююЗапись(ВалютаЮСД);\n\t\n\tРешена =  ЗадачаРешена(ВалютаЮСД);\n\n\t// Восстановим регистр в исходное состояние\n\tНаборВосстановление = РегистрыСведений.КурсыВалют.СоздатьНаборЗаписей();\n\tНаборВосстановление.Записать(); \n\tНаборВосстановление.Загрузить(Снимок);\n\tНаборВосстановление.Записать();  \n\t\n\tВозврат Решена;\n\t\nКонецФункции\n\n\n"
}